!function(e){e(function(){let o="";e("#new-quote-button").on("click",function(t){t.preventDefault(),o=document.URL,e.ajax({method:"get",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(o){const t=o[0].title.rendered,n=o[0].content.rendered,u=o[0]._qod_quote_source,s=o[0]._qod_quote_source_url,r=`<a href="${s}">${u}</a>`;history.pushState(null,null,o[0].slug),e(".entry-content p").html(n),e(".entry-title").html(t),e(".source").html(r)}).fail(function(e){console.log(e)}),e(window).on("popstate",function(){window.location.replace(o)})}),e("#quote-submission-form").on("submit",function(o){o.preventDefault();const t=e("#quote-author").val(),n=e("#quote-content").val(),u=e("#quote-source").val(),s=e("#quote-source-url").val();console.log("form submitted"),""!==t.length&&e.ajax({method:"post",url:api_vars.rest_url+"wp/v2/posts",data:{title:t,content:n,status:"pending",_qod_quote_source:u,_qod_quote_source_url:s},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.wpapi_nonce)}}).done(function(){console.log("great success"),e("#quote-submission-form").slideUp("2000")}).fail(function(){console.log("not so great")})})})}(jQuery);